<!DOCTYPE HTML>
<html dir="ltr" lang="en">
	<head>
		<meta http-equiv="Content-Type"
			content="text/html;charset=UTF-8">
		<title>Traversal</title>
	</head>
	<body>
		<h1>Traversal Test</h1>
		<ol>
			<li>
				Test if <code>children</code>
					can be collected;
			</li>
			<li>
				Test if <code>childNodes</code>
					can be collected;
			</li>
		</ol>
		<h2>Test Element</h2>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
		</ul>
		<button id="start" type="button">Run Test</button>
		<button id="stop" type="button">Clear Test</button>
		<hr>
		<h2>Results</h2>
		<pre id="results"></pre>
		<script src="../Library/utils.js"
			type="text/javascript"></script>
		<script src="../Library/nodes.js"
			type="text/javascript"></script>
		<script src="../Library/traversal.js"
			type="text/javascript"></script>
		<script type="text/javascript">
			(function () {
				var commonElements = {
					"test": document.getElementById("test"),
					"start": document.getElementById("start"),
					"stop": document.getElementById("stop"),
					"results": document.getElementById("results")
				},
				children = Utils.traversal.getChildren(
					commonElements.test
				),
				childNodes = Utils.traversal.getChildNodes(
					commonElements.test
				);

				function createMessage(text)
				{
					var str = String(text);
					return document.createTextNode(
						str + "\n"
					);
				}

				function addMessage(text)
				{
					var isText =
						Utils.nodes.isTextNode(
							text
						),
						parent = commonElements.results;
					if (!isText) {
						text = createMessage(text);
					}
					parent.appendChild(text);
				}

				function runTest(evt)
				{
					addMessage(children);
					addMessage(childNodes);
				}

				function clearTest(evt)
				{
					var parent = commonElements.results,
					nodes = parent.childNodes;
					while(nodes.length) {
						parent.removeChild(
							nodes[0]
						);
					}
				}

				function addHandlers()
				{
					commonElements.start.onclick = runTest;
					commonElements.stop.onclick = clearTest;
				}

				addHandlers();
			}());
		</script>
	</body>
</html>
