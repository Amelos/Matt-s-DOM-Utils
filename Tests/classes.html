<!DOCTYPE HTML>
<html dir="ltr" lang="en">
	<head>
		<meta http-equiv="Content-Type"
			content="text/html;charset=UTF-8">
		<title>Classes</title>
	</head>
	<body>
		<h1>Classes Test</h1>
		<ol>
			<li>
				Test if class <code>"good"</code>
					can be added;
			</li>
			<li>
				Test if class <code>"good"</code>
					can be detected;
			</li>
			<li>
				Test if class <code>"good"</code>
					can be removed;
			</li>
		</ol>
		<h2>Test Element</h2>
		<blockquote cite="http://www.darklyrics.com/lyrics/theruinsofbeverast/unlocktheshrinereliquaryofthewhiteabyss.html#11"
			id="test">
			<pre>Until these tunnels
Shall become our grave
We dwell with the poets
The eerie echoes
Of shameful choirs
Howl deep within here
Sounds of harm
From where the stillborn graze
Standing armed without a strategy
In a war
That never should have been declared
Eyes adapted to perpetual dawn
The trembling march of the offensive pack
With the bark of the hounds
Our final rhyme shall be composed
We await this, our time
When the foul screams of agony
Will sound through the mine.</pre>
		</blockquote>
		<button id="start" type="button">Run Test</button>
		<button id="stop" type="button">Clear Test</button>
		<hr>
		<h2>Results</h2>
		<pre id="results"></pre>
		<script src="../Library/utils.js"
			type="text/javascript"></script>
		<script src="../Library/nodes.js"
			type="text/javascript"></script>
		<script src="../Library/classes.js"
			type="text/javascript"></script>
		<script type="text/javascript">
			(function () {
				var commonElements = {
					"test": document.getElementById("test"),
					"start": document.getElementById("start"),
					"stop": document.getElementById("stop"),
					"results": document.getElementById("results")
				},
				canAdd = Utils.classes.add(
					"good",
					commonElements.test
				),
				canDetect = Utils.classes.has(
					"good",
					commonElements.test
				),
				canRemove = Utils.classes.remove(
					"good",
					commonElements.test
				);

				function createMessage(text)
				{
					var str = text.toString();
					return document.createTextNode(
						str + "\n"
					);
				}

				function addMessage(text)
				{
					var isText =
						Utils.nodes.isTextNode(
							text
						),
						parent = commonElements.results;
					if (!isText) {
						text = createMessage(text);
					}
					parent.appendChild(text);
				}

				function runTest(evt)
				{
					addMessage(canAdd);
					addMessage(canDetect);
					addMessage(canRemove);
				}

				function clearTest(evt)
				{
					var parent = commonElements.results,
					nodes = parent.childNodes;
					while(nodes.length) {
						parent.removeChild(
							nodes[0]
						);
					}
				}

				function addHandlers()
				{
					commonElements.start.onclick = runTest;
					commonElements.stop.onclick = clearTest;
				}

				addHandlers();
			}());
		</script>
	</body>
</html>
